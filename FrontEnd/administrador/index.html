<body class="tema1">
    <header>
            <nav>
                <ul>
                    <li><a href="index.html">Ver</a></li>
                    <li><a href="consultar.html">Consultar id</a></li>
                    <li><a href="crear.html">Crear</a></li>
                    <li><a href="modificar.html">Modificar</a></li>
                    <li><a href="eliminar.html">Eliminar</a></li>  
                    <li><button id="cambiarTema">Tema</button></li>
                </ul>
            </nav>
        </header>

            <main>
                <div class="logo-titulo">
                    <img src="./img-admin/rueda.png" alt="Imagen de rueda">
                    <h1>Panel administración | Entre líneas</h1>
                </div>
                <section id="contenedor-productos"></section>
            </main>

            
            <script>
                
            let contenedorProductos = document.getElementById("contenedor-productos");
            let url = "http://localhost:3000";

            async function obtenerProductos() {
                try {
                    let response = await fetch(`${url}/api/products`);

                    console.log(`Solicitud fetch GET a ${url}/api/products`);

                    let data = await response.json();

                    console.log(data);
                    let productos = data.payload;
                    console.log(productos);

                    mostrarProductos(productos);

                } catch (error) {
                    console.error("Error obteniendo productos: ", error);
                }
            }


            function mostrarProductos(array) {
                let htmlProductos = "";
                
                array.forEach(prod => {
                    htmlProductos += `
                        <div class="card-producto">
                            <img class="producto-img" src="${prod.ruta_img}" alt="${prod.titulo}">
                            <h3>${prod.titulo}</h3>
                            <p>
                                Id: ${prod.id}<br>
                                $${prod.precio}<br>
                                Estado: <span class="${prod.activo === 1 ? "estado-activo" : "estado-inactivo"}">
                                ${prod.activo === 1? "Activo" : "Inactivo"}
                                </span>
                            </p>
                        </div>
                    `;
                });
                contenedorProductos.innerHTML = htmlProductos;
            }

            //Cambiar tema
            let body = document.body;
            let cambiarTema = document.getElementById('cambiarTema');
            body.classList.toggle('tema2', localStorage.getItem('modo')==='t2')
            cambiarTema.addEventListener('click', () => {
                let tema = body.classList.toggle('tema2');
                localStorage.setItem('modo', tema ? 't2' : 't1')
            })
//

            function init() {
                obtenerProductos();
            }

            init();
        </script>
    
    </body>
</html>

